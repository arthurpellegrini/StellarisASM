


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         ;; RK - Evalbot (Cortex M3 de Texas Instrument)
    3 00000000         ;; fait clignoter une seule LED connectée au port GPIOF
    4 00000000         
    5 00000000                 AREA             |.text|, CODE, READONLY
    6 00000000         
    7 00000000         ; This register controls the clock gating logic in norma
                       l Run mode
    8 00000000 400FE108 
                       SYSCTL_PERIPH_GPIOF
                               EQU              0x400FE108  ; SYSCTL_RCGC2_R (p
                                                            291 datasheet de lm
                                                            3s9b92.pdf)
    9 00000000         
   10 00000000         ; The GPIODATA register is the data register
   11 00000000 40025000 
                       GPIO_PORTF_BASE
                               EQU              0x40025000  ; GPIO Port F (APB)
                                                             base: 0x4002.5000 
                                                            (p416 datasheet de 
                                                            lm3s9B92.pdf)
   12 00000000         
   13 00000000         ; configure the corresponding pin to be an output
   14 00000000         ; all GPIO pins are inputs by default
   15 00000000 00000400 
                       GPIO_O_DIR
                               EQU              0x00000400  ; GPIO Direction (p
                                                            417 datasheet de lm
                                                            3s9B92.pdf)
   16 00000000         
   17 00000000         ; The GPIODR2R register is the 2-mA drive control regist
                       er
   18 00000000         ; By default, all GPIO pins have 2-mA drive.
   19 00000000 00000500 
                       GPIO_O_DR2R
                               EQU              0x00000500  ; GPIO 2-mA Drive S
                                                            elect (p428 datashe
                                                            et de lm3s9B92.pdf)
                                                            
   20 00000000         
   21 00000000         ; Digital enable register
   22 00000000         ; To use the pin as a digital input or output, the corre
                       sponding GPIODEN bit must be set.
   23 00000000 0000051C 
                       GPIO_O_DEN
                               EQU              0x0000051C  ; GPIO Digital Enab
                                                            le (p437 datasheet 
                                                            de lm3s9B92.pdf)
   24 00000000         
   25 00000000         ; PIN select
   26 00000000 00000030 
                       PINS_PORTF
                               EQU              0x30        ; led 1 & 2 sur bro
                                                            che 4 & 5 (0011 000
                                                            0)
   27 00000000         
   28 00000000         ; blinking frequency
   29 00000000 002FFFFF 
                       DUREE   EQU              0x002FFFFF  ; Random Value



ARM Macro Assembler    Page 2 


   30 00000000         
   31 00000000                 ENTRY
   32 00000000                 EXPORT           __main
   33 00000000         __main
   34 00000000         
   35 00000000         ; ;; Enable the Port F peripheral clock by setting bit 5
                        (0x20 == 0b100000)  (p291 datasheet de lm3s9B96.pdf)
   36 00000000         ; ;;               (GPIO::FEDCBA)
   37 00000000 4E10            ldr              r6, = SYSCTL_PERIPH_GPIOF 
                                                            ;; RCGC2
   38 00000002 F04F 0020       mov              r0, #0x00000020 ;; Enable clock
                                                             sur GPIO F où sont
                                                             branchés les leds 
                                                            (0x20 == 0b100000)
   39 00000006         ; ;;                         (GPIO::FEDCBA)
   40 00000006 6030            str              r0, [r6]
   41 00000008         
   42 00000008         ; ;; "There must be a delay of 3 system clocks before an
                       y GPIO reg. access  (p413 datasheet de lm3s9B92.pdf)
   43 00000008 BF00            nop                          ;; tres tres import
                                                            ant....
   44 0000000A BF00            nop
   45 0000000C BF00            nop                          ;; pas necessaire e
                                                            n simu ou en debbug
                                                             step by step...
   46 0000000E         
   47 0000000E         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CONFIGURATION LED
   48 0000000E F04F 0030       ldr              r0, = PINS_PORTF
   49 00000012 4E0D            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DI
R
   50 00000014 6030            str              r0, [r6]
   51 00000016         
   52 00000016 4E0D            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DE
N
   53 00000018 6030            str              r0, [r6]
   54 0000001A         
   55 0000001A 4E0D            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DR
2R
   56 0000001C 6030            str              r0, [r6]
   57 0000001E         
   58 0000001E         ; allumer les leds
   59 0000001E F04F 0330       mov              r3, #PINS_PORTF ;; Allume portF
                                                             broches 4 et 5
   60 00000022 4E0C            ldr              r6, = GPIO_PORTF_BASE + (PINS_P
ORTF<<2)
   61 00000024         
   62 00000024         
   63 00000024 F04F 0200       mov              r2, #0x000  ;; pour eteindre LE
                                                            D
   64 00000028         
   65 00000028         ;vvvvvvvvvvvvvvvvvvvvvvvFin configuration LED 
   66 00000028         
   67 00000028         
   68 00000028         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CONFIGURATION SWITCH
   69 00000028         
   70 00000028         ;vvvvvvvvvvvvvvvvvvvvvvvFin configuration SWITCH
   71 00000028         
   72 00000028         
   73 00000028         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CLIGNOTTEMENT



ARM Macro Assembler    Page 3 


   74 00000028         
   75 00000028         loop
   76 00000028 F04F 0220       mov              r2, #0x20
   77 0000002C 6032            str              r2, [r6]    ;; Eteint LED car r
                                                            2 = 0x00       
   78 0000002E         
   79 0000002E 490A            ldr              r1, = DUREE
   80 00000030 3901    wait1   subs             r1, #1
   81 00000032 D1FD            bne              wait1
   82 00000034         
   83 00000034 F04F 0310       mov              r3, #0x10
   84 00000038 6033            str              r3, [r6]    ;; Allume portF bro
                                                            che 4 & 5 : 0011000
                                                            0 (contenu de r3)
   85 0000003A         
   86 0000003A 4907            ldr              r1, = DUREE
   87 0000003C 3901    wait2   subs             r1, #1
   88 0000003E D1FD            bne              wait2
   89 00000040         
   90 00000040 E7F2            b                loop
   91 00000042         
   92 00000042 BF00            nop
   93 00000044                 END
              400FE108 
              40025400 
              4002551C 
              40025500 
              400250C0 
              002FFFFF 
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=.\main.d
 -o.\main.o -I"C:\Program Files\Keil\ARM\RV31\INC" -I"C:\Program Files\Keil\ARM
\CMSIS\Include" -I"C:\Program Files\Keil\ARM\Inc\Luminary" --predefine="__EVAL 
SETA 1" --predefine="__MICROLIB SETA 1" --list=.\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 5 in file main.s
   Uses
      None
Comment: .text unused
__main 00000000

Symbol: __main
   Definitions
      At line 33 in file main.s
   Uses
      At line 32 in file main.s
Comment: __main used once
loop 00000028

Symbol: loop
   Definitions
      At line 75 in file main.s
   Uses
      At line 90 in file main.s
Comment: loop used once
wait1 00000030

Symbol: wait1
   Definitions
      At line 80 in file main.s
   Uses
      At line 81 in file main.s
Comment: wait1 used once
wait2 0000003C

Symbol: wait2
   Definitions
      At line 87 in file main.s
   Uses
      At line 88 in file main.s
Comment: wait2 used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DUREE 002FFFFF

Symbol: DUREE
   Definitions
      At line 29 in file main.s
   Uses
      At line 79 in file main.s
      At line 86 in file main.s

GPIO_O_DEN 0000051C

Symbol: GPIO_O_DEN
   Definitions
      At line 23 in file main.s
   Uses
      At line 52 in file main.s
Comment: GPIO_O_DEN used once
GPIO_O_DIR 00000400

Symbol: GPIO_O_DIR
   Definitions
      At line 15 in file main.s
   Uses
      At line 49 in file main.s
Comment: GPIO_O_DIR used once
GPIO_O_DR2R 00000500

Symbol: GPIO_O_DR2R
   Definitions
      At line 19 in file main.s
   Uses
      At line 55 in file main.s
Comment: GPIO_O_DR2R used once
GPIO_PORTF_BASE 40025000

Symbol: GPIO_PORTF_BASE
   Definitions
      At line 11 in file main.s
   Uses
      At line 49 in file main.s
      At line 52 in file main.s
      At line 55 in file main.s
      At line 60 in file main.s

PINS_PORTF 00000030

Symbol: PINS_PORTF
   Definitions
      At line 26 in file main.s
   Uses
      At line 48 in file main.s
      At line 59 in file main.s
      At line 60 in file main.s

SYSCTL_PERIPH_GPIOF 400FE108

Symbol: SYSCTL_PERIPH_GPIOF
   Definitions
      At line 8 in file main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 37 in file main.s
Comment: SYSCTL_PERIPH_GPIOF used once
7 symbols
346 symbols in table
