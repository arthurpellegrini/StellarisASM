


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         ;; RK - Evalbot (Cortex M3 de Texas Instrument)
    3 00000000         ;; fait clignoter une seule LED connect�e au port GPIO
                       F
    4 00000000         
    5 00000000                 AREA             |.text|, CODE, READONLY
    6 00000000         
    7 00000000         ; This register controls the clock gating logic in norma
                       l Run mode
    8 00000000 400FE108 
                       SYSCTL_PERIPH_GPIOF
                               EQU              0x400FE108  ; SYSCTL_RCGC2_R (p
                                                            291 datasheet de lm
                                                            3s9b92.pdf)
    9 00000000         
   10 00000000         ; The GPIODATA register is the data register
   11 00000000 40007000 
                       GPIO_PORTD_BASE
                               EQU              0x40007000  ; GPIO Port D (APB)
                                                             base: 0x4000.7000
   12 00000000 40024000 
                       GPIO_PORTE_BASE
                               EQU              0x40024000  ; GPIO Port E (APB)
                                                             base: 0x4002.4000
   13 00000000 40025000 
                       GPIO_PORTF_BASE
                               EQU              0x40025000  ; GPIO Port F (APB)
                                                             base: 0x4002.5000 
                                                            (p416 datasheet de 
                                                            lm3s9B92.pdf)
   14 00000000         
   15 00000000         ; configure the corresponding pin to be an output
   16 00000000         ; all GPIO pins are inputs by default
   17 00000000 00000400 
                       GPIO_O_DIR
                               EQU              0x00000400  ; GPIO Direction (p
                                                            417 datasheet de lm
                                                            3s9B92.pdf)
   18 00000000         
   19 00000000         ; The GPIODR2R register is the 2-mA drive control regist
                       er
   20 00000000         ; By default, all GPIO pins have 2-mA drive.
   21 00000000 00000500 
                       GPIO_O_DR2R
                               EQU              0x00000500  ; GPIO 2-mA Drive S
                                                            elect (p428 datashe
                                                            et de lm3s9B92.pdf)
                                                            
   22 00000000         
   23 00000000         ; Digital enable register
   24 00000000         ; To use the pin as a digital input or output, the corre
                       sponding GPIODEN bit must be set.
   25 00000000 0000051C 
                       GPIO_O_DEN
                               EQU              0x0000051C  ; GPIO Digital Enab
                                                            le (p437 datasheet 
                                                            de lm3s9B92.pdf)
   26 00000000         
   27 00000000         ; The GPIOPUR register is the pull-up control register



ARM Macro Assembler    Page 2 


   28 00000000 00000510 
                       GPIO_O_PUR
                               EQU              0x00000510
   29 00000000         
   30 00000000         ; PINS port input
   31 00000000 000000C0 
                       PINSD_6_7
                               EQU              0xC0        ; switch 1 & 2 sur 
                                                            broches 6 & 7 (1100
                                                             0000)
   32 00000000 00000003 
                       PINSE_1_2
                               EQU              0x03        ; bumpers 1 & 2 sur
                                                             les broches (0000 
                                                            0011)
   33 00000000         
   34 00000000         ; PINS port output
   35 00000000 00000030 
                       PINSF_4_5
                               EQU              0x30        ; led 1 & 2 sur bro
                                                            ches 4 & 5 (0011 00
                                                            00)
   36 00000000         
   37 00000000         ; blinking frequency
   38 00000000 002FFFFF 
                       DUREE   EQU              0x002FFFFF  ; Random Value
   39 00000000         
   40 00000000                 ENTRY
   41 00000000                 EXPORT           __main
   42 00000000         __main
   43 00000000         
   44 00000000         ; ;; Enable the Port F peripheral clock by setting bit 5
                        (0x20 == 0b100000)  (p291 datasheet de lm3s9B96.pdf)
   45 00000000         ; ;;               (GPIO::FEDCBA)
   46 00000000 4E19            ldr              r6, = SYSCTL_PERIPH_GPIOF 
                                                            ;; RCGC2
   47 00000002 F04F 0038       mov              r0, #0x00000038 ;; Enable clock
                                                             sur GPIO F E D (00
                                                            11 1000)
   48 00000006         ; ;;                         (GPIO::FEDCBA)
   49 00000006 6030            str              r0, [r6]
   50 00000008         
   51 00000008         ; ;; "There must be a delay of 3 system clocks before an
                       y GPIO reg. access  (p413 datasheet de lm3s9B92.pdf)
   52 00000008 BF00            nop                          ;; tres tres import
                                                            ant....
   53 0000000A BF00            nop
   54 0000000C BF00            nop                          ;; pas necessaire e
                                                            n simu ou en debbug
                                                             step by step...
   55 0000000E         
   56 0000000E         ;-----------------------CONFIGURATION LED
   57 0000000E F04F 0030       ldr              r0, = PINSF_4_5
   58 00000012 4E16            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DI
R
   59 00000014 6030            str              r0, [r6]
   60 00000016         
   61 00000016 4E16            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DE
N



ARM Macro Assembler    Page 3 


   62 00000018 6030            str              r0, [r6]
   63 0000001A         
   64 0000001A 4E16            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DR
2R
   65 0000001C 6030            str              r0, [r6]
   66 0000001E         
   67 0000001E         ; allumer les leds
   68 0000001E F04F 0230       mov              r2, #PINSF_4_5
   69 00000022         
   70 00000022         ;; Allume portF broches 4 et 5        
   71 00000022 4E15            ldr              r6, = GPIO_PORTF_BASE + (PINSF_
4_5<<2)
   72 00000024         
   73 00000024         ;; pour eteindre LED 
   74 00000024 F04F 0100       mov              r1, #0x000
   75 00000028         
   76 00000028         ;-----------------------FIN CONFIGURATION LED 
   77 00000028         
   78 00000028         ;-----------------------CONFIGURATION SWITCH
   79 00000028 F04F 00C0       ldr              r0, = PINSD_6_7
   80 0000002C         
   81 0000002C 4F13            ldr              r7, = GPIO_PORTD_BASE+GPIO_O_DE
N
   82 0000002E 6038            str              r0, [r7]
   83 00000030         
   84 00000030 4F13            ldr              r7, = GPIO_PORTD_BASE+GPIO_O_PU
R
   85 00000032 6038            str              r0, [r7]
   86 00000034         
   87 00000034 4F13            ldr              r7, = GPIO_PORTD_BASE + (PINSD_
6_7<<2)
   88 00000036         ;-----------------------FIN CONFIGURATION SWITCH
   89 00000036         
   90 00000036         ;;-----------------------CONFIGURATION BUMPER
   91 00000036 F04F 0003       ldr              r0, = PINSE_1_2
   92 0000003A         
   93 0000003A F8DF 804C       ldr              r8, = GPIO_PORTE_BASE+GPIO_O_DE
N
   94 0000003E F8C8 0000       str              r0, [r8]
   95 00000042         
   96 00000042 F8DF 8048       ldr              r8, = GPIO_PORTE_BASE+GPIO_O_PU
R
   97 00000046 F8C8 0000       str              r0, [r8]
   98 0000004A F8DF 8044       ldr              r8, = GPIO_PORTE_BASE + (PINSE_
1_2<<2)
   99 0000004E         ;;-----------------------FIN CONFIGURATION BUMPER
  100 0000004E         
  101 0000004E         
  102 0000004E         ;-----------------------CLIGNOTTEMENT
  103 0000004E         
  104 0000004E         loop
  105 0000004E 683B            ldr              r3, [r7]    ;; on récupère le
                                                            s entrées des swit
                                                            chs
  106 00000050 F8D8 4000       ldr              r4, [r8]    ;; on récupère le
                                                            s entrées des bump
                                                            ers
  107 00000054 6031            str              r1, [r6]    ;; Eteint LED car r
                                                            2 = 0x00       



ARM Macro Assembler    Page 4 


  108 00000056         
  109 00000056 480F            ldr              r0, = DUREE
  110 00000058 3801    wait1   subs             r0, #1
  111 0000005A D1FD            bne              wait1
  112 0000005C         
  113 0000005C 6032            str              r2, [r6]    ;; Allume portF bro
                                                            che 4 & 5 : 0011000
                                                            0 (contenu de r3)
  114 0000005E         
  115 0000005E 480D            ldr              r0, = DUREE
  116 00000060 3801    wait2   subs             r0, #1
  117 00000062 D1FD            bne              wait2
  118 00000064         
  119 00000064 E7F3            b                loop
  120 00000066         
  121 00000066 BF00            nop
  122 00000068                 END
              400FE108 
              40025400 
              4002551C 
              40025500 
              400250C0 
              4000751C 
              40007510 
              40007300 
              4002451C 
              40024510 
              4002400C 
              002FFFFF 
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=.\main.d
 -o.\main.o -I"C:\Program Files\Keil\ARM\RV31\INC" -I"C:\Program Files\Keil\ARM
\CMSIS\Include" -I"C:\Program Files\Keil\ARM\Inc\Luminary" --predefine="__EVAL 
SETA 1" --predefine="__MICROLIB SETA 1" --list=.\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 5 in file main.s
   Uses
      None
Comment: .text unused
__main 00000000

Symbol: __main
   Definitions
      At line 42 in file main.s
   Uses
      At line 41 in file main.s
Comment: __main used once
loop 0000004E

Symbol: loop
   Definitions
      At line 104 in file main.s
   Uses
      At line 119 in file main.s
Comment: loop used once
wait1 00000058

Symbol: wait1
   Definitions
      At line 110 in file main.s
   Uses
      At line 111 in file main.s
Comment: wait1 used once
wait2 00000060

Symbol: wait2
   Definitions
      At line 116 in file main.s
   Uses
      At line 117 in file main.s
Comment: wait2 used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DUREE 002FFFFF

Symbol: DUREE
   Definitions
      At line 38 in file main.s
   Uses
      At line 109 in file main.s
      At line 115 in file main.s

GPIO_O_DEN 0000051C

Symbol: GPIO_O_DEN
   Definitions
      At line 25 in file main.s
   Uses
      At line 61 in file main.s
      At line 81 in file main.s
      At line 93 in file main.s

GPIO_O_DIR 00000400

Symbol: GPIO_O_DIR
   Definitions
      At line 17 in file main.s
   Uses
      At line 58 in file main.s
Comment: GPIO_O_DIR used once
GPIO_O_DR2R 00000500

Symbol: GPIO_O_DR2R
   Definitions
      At line 21 in file main.s
   Uses
      At line 64 in file main.s
Comment: GPIO_O_DR2R used once
GPIO_O_PUR 00000510

Symbol: GPIO_O_PUR
   Definitions
      At line 28 in file main.s
   Uses
      At line 84 in file main.s
      At line 96 in file main.s

GPIO_PORTD_BASE 40007000

Symbol: GPIO_PORTD_BASE
   Definitions
      At line 11 in file main.s
   Uses
      At line 81 in file main.s
      At line 84 in file main.s
      At line 87 in file main.s

GPIO_PORTE_BASE 40024000

Symbol: GPIO_PORTE_BASE
   Definitions
      At line 12 in file main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 93 in file main.s
      At line 96 in file main.s
      At line 98 in file main.s

GPIO_PORTF_BASE 40025000

Symbol: GPIO_PORTF_BASE
   Definitions
      At line 13 in file main.s
   Uses
      At line 58 in file main.s
      At line 61 in file main.s
      At line 64 in file main.s
      At line 71 in file main.s

PINSD_6_7 000000C0

Symbol: PINSD_6_7
   Definitions
      At line 31 in file main.s
   Uses
      At line 79 in file main.s
      At line 87 in file main.s

PINSE_1_2 00000003

Symbol: PINSE_1_2
   Definitions
      At line 32 in file main.s
   Uses
      At line 91 in file main.s
      At line 98 in file main.s

PINSF_4_5 00000030

Symbol: PINSF_4_5
   Definitions
      At line 35 in file main.s
   Uses
      At line 57 in file main.s
      At line 68 in file main.s
      At line 71 in file main.s

SYSCTL_PERIPH_GPIOF 400FE108

Symbol: SYSCTL_PERIPH_GPIOF
   Definitions
      At line 8 in file main.s
   Uses
      At line 46 in file main.s
Comment: SYSCTL_PERIPH_GPIOF used once
12 symbols
351 symbols in table
