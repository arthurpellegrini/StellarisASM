


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         ;;; RK - Evalbot (Cortex M3 de Texas Instrument)
    3 00000000         ;;; fait clignoter une seule LED connect�e au port GPI
                       OF
    4 00000000         
    5 00000000         ;AREA    |.text|, CODE, READONLY
    6 00000000         
    7 00000000         ;; This register controls the clock gating logic in norm
                       al Run mode
    8 00000000         ;SYSCTL_PERIPH_GPIOF EQU  0x400FE108 ; SYSCTL_RCGC2_R (p
                       291 datasheet de lm3s9b92.pdf)
    9 00000000         
   10 00000000         ;; The GPIODATA register is the data register
   11 00000000         ;GPIO_PORTD_BASE  EQU  0x40007000 ; GPIO Port D (APB) ba
                       se: 0x4000.7000
   12 00000000         ;GPIO_PORTE_BASE  EQU  0x40024000 ; GPIO Port E (APB) ba
                       se: 0x4002.4000
   13 00000000         ;GPIO_PORTF_BASE  EQU  0x40025000 ; GPIO Port F (APB) ba
                       se: 0x4002.5000 (p416 datasheet de lm3s9B92.pdf)
   14 00000000         
   15 00000000         ;; configure the corresponding pin to be an output
   16 00000000         ;; all GPIO pins are inputs by default
   17 00000000         ;GPIO_O_DIR     EQU  0x00000400  ; GPIO Direction (p417 
                       datasheet de lm3s9B92.pdf)
   18 00000000         
   19 00000000         ;; The GPIODR2R register is the 2-mA drive control regis
                       ter
   20 00000000         ;; By default, all GPIO pins have 2-mA drive.
   21 00000000         ;GPIO_O_DR2R     EQU  0x00000500  ; GPIO 2-mA Drive Sele
                       ct (p428 datasheet de lm3s9B92.pdf)
   22 00000000         
   23 00000000         ;; Digital enable register
   24 00000000         ;; To use the pin as a digital input or output, the corr
                       esponding GPIODEN bit must be set.
   25 00000000         ;GPIO_O_DEN     EQU  0x0000051C  ; GPIO Digital Enable (
                       p437 datasheet de lm3s9B92.pdf)
   26 00000000         
   27 00000000         ;; The GPIOPUR register is the pull-up control register
   28 00000000         ;GPIO_O_PUR   EQU  0x00000510 
   29 00000000         
   30 00000000         ;; PINS port input
   31 00000000         ;PINSD_6_7    EQU  0xC0  ; switch 1 & 2 sur broches 6 & 
                       7 (1100 0000)
   32 00000000         ;PINSE_1_2    EQU  0x03  ; bumpers 1 & 2 sur les broches
                        (0000 0011)
   33 00000000         
   34 00000000         ;; PINS port output
   35 00000000         ;PINSF_4_5    EQU  0x30  ; led 1 & 2 sur broches 4 & 5 (
                       0011 0000)
   36 00000000         
   37 00000000         ;; blinking frequency
   38 00000000         ;DUREE      EQU     0x002FFFFF ; Random Value
   39 00000000         
   40 00000000         ;ENTRY
   41 00000000         ;EXPORT __main
   42 00000000         ;__main 
   43 00000000         
   44 00000000         ;; ;; Enable the Port F peripheral clock by setting bit 
                       5 (0x20 == 0b100000)  (p291 datasheet de lm3s9B96.pdf)



ARM Macro Assembler    Page 2 


   45 00000000         ;; ;;               (GPIO::FEDCBA)
   46 00000000         ;ldr r6, = SYSCTL_PERIPH_GPIOF     ;; RCGC2
   47 00000000         ;mov r0, #0x00000038       ;; Enable clock sur GPIO F E 
                       D (0011 1000)
   48 00000000         ;; ;;                         (GPIO::FEDCBA)
   49 00000000         ;str r0, [r6]
   50 00000000         
   51 00000000         ;; ;; "There must be a delay of 3 system clocks before a
                       ny GPIO reg. access  (p413 datasheet de lm3s9B92.pdf)
   52 00000000         ;nop             ;; tres tres important....
   53 00000000         ;nop    
   54 00000000         ;nop             ;; pas necessaire en simu ou en debbug 
                       step by step...
   55 00000000         
   56 00000000         ;;-----------------------CONFIGURATION LED
   57 00000000         ;ldr r0, = PINSF_4_5
   58 00000000         ;ldr r6, = GPIO_PORTF_BASE+GPIO_O_DIR   
   59 00000000         ;str r0, [r6]
   60 00000000         
   61 00000000         ;ldr r6, = GPIO_PORTF_BASE+GPIO_O_DEN
   62 00000000         ;str r0, [r6]
   63 00000000         
   64 00000000         ;ldr r6, = GPIO_PORTF_BASE+GPIO_O_DR2R  
   65 00000000         ;str r0, [r6]
   66 00000000         
   67 00000000         ;; allumer les leds
   68 00000000         ;mov r2, #PINSF_4_5    
   69 00000000         
   70 00000000         ;;; Allume portF broches 4 et 5        
   71 00000000         ;ldr r6, = GPIO_PORTF_BASE + (PINSF_4_5<<2) 
   72 00000000         
   73 00000000         ;;; pour eteindre LED 
   74 00000000         ;mov r1, #0x000            
   75 00000000         
   76 00000000         ;;-----------------------FIN CONFIGURATION LED 
   77 00000000         
   78 00000000         ;;-----------------------CONFIGURATION SWITCH
   79 00000000         ;ldr r0, = PINSD_6_7
   80 00000000         
   81 00000000         ;ldr r7, = GPIO_PORTD_BASE+GPIO_O_DEN
   82 00000000         ;str r0, [r7]
   83 00000000         
   84 00000000         ;ldr r7, = GPIO_PORTD_BASE+GPIO_O_PUR 
   85 00000000         ;str r0, [r7]
   86 00000000         
   87 00000000         ;ldr r7, = GPIO_PORTD_BASE + (PINSD_6_7<<2) 
   88 00000000         ;;-----------------------FIN CONFIGURATION SWITCH
   89 00000000         
   90 00000000         ;;;----------------------CONFIGURATION BUMPER
   91 00000000         ;ldr r0, = PINSE_1_2
   92 00000000         
   93 00000000         ;ldr r8, = GPIO_PORTE_BASE+GPIO_O_DEN
   94 00000000         ;str r0, [r8]
   95 00000000         
   96 00000000         ;ldr r8, = GPIO_PORTE_BASE+GPIO_O_PUR 
   97 00000000         ;str r0, [r8]
   98 00000000         ;ldr r8, = GPIO_PORTE_BASE + (PINSE_1_2<<2) 
   99 00000000         ;;;----------------------FIN CONFIGURATION BUMPER
  100 00000000         



ARM Macro Assembler    Page 3 


  101 00000000         
  102 00000000         ;;-----------------------CLIGNOTTEMENT
  103 00000000         
  104 00000000         ;loop    
  105 00000000         ;ldr r3, [r7]       ;; on récupère les entrées des sw
                       itchs
  106 00000000         ;ldr r4, [r8]       ;; on récupère les entrées des bu
                       mpers
  107 00000000         ;str r1, [r6]          ;; Eteint LED car r2 = 0x00      
                        
  108 00000000         
  109 00000000         ;ldr r0, = DUREE
  110 00000000         ;wait1 subs r0, #1
  111 00000000         ;bne wait1
  112 00000000         
  113 00000000         ;str r2, [r6]         ;; Allume portF broche 4 & 5 : 001
                       10000 (contenu de r3)
  114 00000000         
  115 00000000         ;ldr r0, = DUREE
  116 00000000         ;wait2   subs r0, #1
  117 00000000         ;bne wait2
  118 00000000         
  119 00000000         ;b loop       
  120 00000000         
  121 00000000         ;nop  
  122 00000000         ;END
                       
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=.\main.d
 -o.\main.o -I"C:\Program Files\Keil\ARM\RV31\INC" -I"C:\Program Files\Keil\ARM
\CMSIS\Include" -I"C:\Program Files\Keil\ARM\Inc\Luminary" --predefine="__EVAL 
SETA 1" --predefine="__MICROLIB SETA 1" --list=.\main.lst main.s
332 symbols in table
