


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         ;; RK - Evalbot (Cortex M3 de Texas Instrument)
    3 00000000         ;; fait clignoter une seule LED connect�e au port GPIO
                       F
    4 00000000         
    5 00000000                 AREA             |.text|, CODE, READONLY
    6 00000000         
    7 00000000         ; This register controls the clock gating logic in norma
                       l Run mode
    8 00000000 400FE108 
                       SYSCTL_PERIPH_GPIOF
                               EQU              0x400FE108  ; SYSCTL_RCGC2_R (p
                                                            291 datasheet de lm
                                                            3s9b92.pdf)
    9 00000000         
   10 00000000         ; The GPIODATA register is the data register
   11 00000000 40007000 
                       GPIO_PORTD_BASE
                               EQU              0x40007000
   12 00000000 40024000 
                       GPIO_PORTE_BASE
                               EQU              0x40024000
   13 00000000 40025000 
                       GPIO_PORTF_BASE
                               EQU              0x40025000  ; GPIO Port F (APB)
                                                             base: 0x4002.5000 
                                                            (p416 datasheet de 
                                                            lm3s9B92.pdf)
   14 00000000         
   15 00000000         ; configure the corresponding pin to be an output
   16 00000000         ; all GPIO pins are inputs by default
   17 00000000 00000400 
                       GPIO_O_DIR
                               EQU              0x00000400  ; GPIO Direction (p
                                                            417 datasheet de lm
                                                            3s9B92.pdf)
   18 00000000         
   19 00000000         ; The GPIODR2R register is the 2-mA drive control regist
                       er
   20 00000000         ; By default, all GPIO pins have 2-mA drive.
   21 00000000 00000500 
                       GPIO_O_DR2R
                               EQU              0x00000500  ; GPIO 2-mA Drive S
                                                            elect (p428 datashe
                                                            et de lm3s9B92.pdf)
                                                            
   22 00000000         
   23 00000000         ; Digital enable register
   24 00000000         ; To use the pin as a digital input or output, the corre
                       sponding GPIODEN bit must be set.
   25 00000000 0000051C 
                       GPIO_O_DEN
                               EQU              0x0000051C  ; GPIO Digital Enab
                                                            le (p437 datasheet 
                                                            de lm3s9B92.pdf)
   26 00000000         
   27 00000000         
   28 00000000         ;
   29 00000000         ;



ARM Macro Assembler    Page 2 


   30 00000000 00000510 
                       GPIO_O_PUR
                               EQU              0x00000510
   31 00000000         
   32 00000000         ; PIN select
   33 00000000 000000C0 
                       PINS_PORTD
                               EQU              0xC0        ; switch 1 & 2 sur 
                                                            broches 6 & 7 (1100
                                                             0000)
   34 00000000 00000003 
                       PINS_PORTE
                               EQU              0x03        ; bumpers 1 & 2 sur
                                                             les broches (0000 
                                                            0011)
   35 00000000 00000030 
                       PINS_PORTF
                               EQU              0x30        ; led 1 & 2 sur bro
                                                            ches 4 & 5 (0011 00
                                                            00)
   36 00000000         
   37 00000000         ; blinking frequency
   38 00000000 002FFFFF 
                       DUREE   EQU              0x002FFFFF  ; Random Value
   39 00000000         
   40 00000000                 ENTRY
   41 00000000                 EXPORT           __main
   42 00000000         __main
   43 00000000         
   44 00000000         ; ;; Enable the Port F peripheral clock by setting bit 5
                        (0x20 == 0b100000)  (p291 datasheet de lm3s9B96.pdf)
   45 00000000         ; ;;               (GPIO::FEDCBA)
   46 00000000 4E12            ldr              r6, = SYSCTL_PERIPH_GPIOF 
                                                            ;; RCGC2
   47 00000002 F04F 0038       mov              r0, #0x00000038 ;; Enable clock
                                                             sur GPIO F E D (00
                                                            11 1000)
   48 00000006         ; ;;                         (GPIO::FEDCBA)
   49 00000006 6030            str              r0, [r6]
   50 00000008         
   51 00000008         ; ;; "There must be a delay of 3 system clocks before an
                       y GPIO reg. access  (p413 datasheet de lm3s9B92.pdf)
   52 00000008 BF00            nop                          ;; tres tres import
                                                            ant....
   53 0000000A BF00            nop
   54 0000000C BF00            nop                          ;; pas necessaire e
                                                            n simu ou en debbug
                                                             step by step...
   55 0000000E         
   56 0000000E         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CONFIGURATION LED
   57 0000000E F04F 0030       ldr              r0, = PINS_PORTF
   58 00000012 4E0F            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DI
R
   59 00000014 6030            str              r0, [r6]
   60 00000016         
   61 00000016 4E0F            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DE
N
   62 00000018 6030            str              r0, [r6]
   63 0000001A         



ARM Macro Assembler    Page 3 


   64 0000001A 4E0F            ldr              r6, = GPIO_PORTF_BASE+GPIO_O_DR
2R
   65 0000001C 6030            str              r0, [r6]
   66 0000001E         
   67 0000001E         ; allumer les leds
   68 0000001E F04F 0330       mov              r3, #PINS_PORTF ;; Allume portF
                                                             broches 4 et 5
   69 00000022 4E0E            ldr              r6, = GPIO_PORTF_BASE + (PINS_P
ORTF<<2)
   70 00000024         
   71 00000024         
   72 00000024 F04F 0200       mov              r2, #0x000  ;; pour eteindre LE
                                                            D
   73 00000028         
   74 00000028         ;vvvvvvvvvvvvvvvvvvvvvvvFin configuration LED 
   75 00000028         
   76 00000028         
   77 00000028         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CONFIGURATION SWITCH
   78 00000028 F04F 00C0       ldr              r0, = PINS_PORTD
   79 0000002C         
   80 0000002C 4F0C            ldr              r7, = GPIO_PORTD_BASE+GPIO_O_DE
N
   81 0000002E 6038            str              r0, [r7]
   82 00000030         
   83 00000030 4F0C            ldr              r7, = GPIO_PORTD_BASE+GPIO_O_PU
R
   84 00000032 6038            str              r0, [r7]
   85 00000034         
   86 00000034 4F0C            ldr              r7, = GPIO_PORTD_BASE + (PINS_P
ORTD<<2)
   87 00000036         ;vvvvvvvvvvvvvvvvvvvvvvvFin configuration SWITCH
   88 00000036         
   89 00000036         
   90 00000036         ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^CLIGNOTTEMENT
   91 00000036         
   92 00000036         loop
   93 00000036 6839            ldr              r1, [r7]    ;; on récupère le
                                                            s entrées des swit
                                                            chs
   94 00000038 6032            str              r2, [r6]    ;; Eteint LED car r
                                                            2 = 0x00       
   95 0000003A         
   96 0000003A 480C            ldr              r0, = DUREE
   97 0000003C 3801    wait1   subs             r0, #1
   98 0000003E D1FD            bne              wait1
   99 00000040         
  100 00000040 6033            str              r3, [r6]    ;; Allume portF bro
                                                            che 4 & 5 : 0011000
                                                            0 (contenu de r3)
  101 00000042         
  102 00000042 480A            ldr              r0, = DUREE
  103 00000044 3801    wait2   subs             r0, #1
  104 00000046 D1FD            bne              wait2
  105 00000048         
  106 00000048 E7F5            b                loop
  107 0000004A         
  108 0000004A BF00            nop
  109 0000004C                 END
              400FE108 



ARM Macro Assembler    Page 4 


              40025400 
              4002551C 
              40025500 
              400250C0 
              4000751C 
              40007510 
              40007300 
              002FFFFF 
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=.\main.d
 -o.\main.o -I"C:\Program Files\Keil\ARM\RV31\INC" -I"C:\Program Files\Keil\ARM
\CMSIS\Include" -I"C:\Program Files\Keil\ARM\Inc\Luminary" --predefine="__EVAL 
SETA 1" --predefine="__MICROLIB SETA 1" --list=.\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 5 in file main.s
   Uses
      None
Comment: .text unused
__main 00000000

Symbol: __main
   Definitions
      At line 42 in file main.s
   Uses
      At line 41 in file main.s
Comment: __main used once
loop 00000036

Symbol: loop
   Definitions
      At line 92 in file main.s
   Uses
      At line 106 in file main.s
Comment: loop used once
wait1 0000003C

Symbol: wait1
   Definitions
      At line 97 in file main.s
   Uses
      At line 98 in file main.s
Comment: wait1 used once
wait2 00000044

Symbol: wait2
   Definitions
      At line 103 in file main.s
   Uses
      At line 104 in file main.s
Comment: wait2 used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DUREE 002FFFFF

Symbol: DUREE
   Definitions
      At line 38 in file main.s
   Uses
      At line 96 in file main.s
      At line 102 in file main.s

GPIO_O_DEN 0000051C

Symbol: GPIO_O_DEN
   Definitions
      At line 25 in file main.s
   Uses
      At line 61 in file main.s
      At line 80 in file main.s

GPIO_O_DIR 00000400

Symbol: GPIO_O_DIR
   Definitions
      At line 17 in file main.s
   Uses
      At line 58 in file main.s
Comment: GPIO_O_DIR used once
GPIO_O_DR2R 00000500

Symbol: GPIO_O_DR2R
   Definitions
      At line 21 in file main.s
   Uses
      At line 64 in file main.s
Comment: GPIO_O_DR2R used once
GPIO_O_PUR 00000510

Symbol: GPIO_O_PUR
   Definitions
      At line 30 in file main.s
   Uses
      At line 83 in file main.s
Comment: GPIO_O_PUR used once
GPIO_PORTD_BASE 40007000

Symbol: GPIO_PORTD_BASE
   Definitions
      At line 11 in file main.s
   Uses
      At line 80 in file main.s
      At line 83 in file main.s
      At line 86 in file main.s

GPIO_PORTE_BASE 40024000

Symbol: GPIO_PORTE_BASE
   Definitions
      At line 12 in file main.s
   Uses
      None



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Comment: GPIO_PORTE_BASE unused
GPIO_PORTF_BASE 40025000

Symbol: GPIO_PORTF_BASE
   Definitions
      At line 13 in file main.s
   Uses
      At line 58 in file main.s
      At line 61 in file main.s
      At line 64 in file main.s
      At line 69 in file main.s

PINS_PORTD 000000C0

Symbol: PINS_PORTD
   Definitions
      At line 33 in file main.s
   Uses
      At line 78 in file main.s
      At line 86 in file main.s

PINS_PORTE 00000003

Symbol: PINS_PORTE
   Definitions
      At line 34 in file main.s
   Uses
      None
Comment: PINS_PORTE unused
PINS_PORTF 00000030

Symbol: PINS_PORTF
   Definitions
      At line 35 in file main.s
   Uses
      At line 57 in file main.s
      At line 68 in file main.s
      At line 69 in file main.s

SYSCTL_PERIPH_GPIOF 400FE108

Symbol: SYSCTL_PERIPH_GPIOF
   Definitions
      At line 8 in file main.s
   Uses
      At line 46 in file main.s
Comment: SYSCTL_PERIPH_GPIOF used once
12 symbols
351 symbols in table
