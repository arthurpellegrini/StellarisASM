


ARM Macro Assembler    Page 1 


    1 00000000         ;;; RK - Evalbot (Cortex M3 de Texas Instrument)
    2 00000000         ;; programme - Pilotage 2 Moteurs Evalbot par PWM tout e
                       n ASM (Evalbot tourne sur lui même)
    3 00000000         
    4 00000000         
    5 00000000         
    6 00000000         ;AREA    |.text|, CODE, READONLY
    7 00000000         ;ENTRY
    8 00000000         ;EXPORT __main
    9 00000000         
   10 00000000         ;;; The IMPORT command specifies that a symbol is define
                       d in a shared object at runtime.
   11 00000000         ;IMPORT MOTEUR_INIT     ; initialise les moteurs (config
                       ure les pwms + GPIO)
   12 00000000         
   13 00000000         ;IMPORT MOTEUR_DROIT_ON    ; activer le moteur droit
   14 00000000         ;IMPORT  MOTEUR_DROIT_OFF   ; déactiver le moteur droit
                       
   15 00000000         ;IMPORT  MOTEUR_DROIT_AVANT   ; moteur droit tourne vers
                        l'avant
   16 00000000         ;IMPORT  MOTEUR_DROIT_ARRIERE  ; moteur droit tourne ver
                       s l'arrière
   17 00000000         ;IMPORT  MOTEUR_DROIT_INVERSE  ; inverse le sens de rota
                       tion du moteur droit
   18 00000000         
   19 00000000         ;IMPORT MOTEUR_GAUCHE_ON   ; activer le moteur gauche
   20 00000000         ;IMPORT  MOTEUR_GAUCHE_OFF   ; déactiver le moteur gauc
                       he
   21 00000000         ;IMPORT  MOTEUR_GAUCHE_AVANT   ; moteur gauche tourne ve
                       rs l'avant
   22 00000000         ;IMPORT  MOTEUR_GAUCHE_ARRIERE  ; moteur gauche tourne v
                       ers l'arrière
   23 00000000         ;IMPORT  MOTEUR_GAUCHE_INVERSE  ; inverse le sens de rot
                       ation du moteur gauche
   24 00000000         
   25 00000000         ;; This register controls the clock gating logic in norm
                       al Run mode
   26 00000000         ;SYSCTL_PERIPH_GPIOF EQU  0x400FE108 ; SYSCTL_RCGC2_R (p
                       291 datasheet de lm3s9b92.pdf)
   27 00000000         
   28 00000000         ;; The GPIODATA register is the data register
   29 00000000         ;GPIO_PORTD_BASE  EQU  0x40007000 ; GPIO Port D (APB) ba
                       se: 0x4000.7000
   30 00000000         ;GPIO_PORTE_BASE  EQU  0x40024000 ; GPIO Port E (APB) ba
                       se: 0x4002.4000
   31 00000000         ;GPIO_PORTF_BASE  EQU  0x40025000 ; GPIO Port F (APB) ba
                       se: 0x4002.5000 (p416 datasheet de lm3s9B92.pdf)
   32 00000000         
   33 00000000         ;; configure the corresponding pin to be an output
   34 00000000         ;; all GPIO pins are inputs by default
   35 00000000         ;GPIO_O_DIR     EQU  0x00000400  ; GPIO Direction (p417 
                       datasheet de lm3s9B92.pdf)
   36 00000000         
   37 00000000         ;; The GPIODR2R register is the 2-mA drive control regis
                       ter
   38 00000000         ;; By default, all GPIO pins have 2-mA drive.
   39 00000000         ;GPIO_O_DR2R     EQU  0x00000500  ; GPIO 2-mA Drive Sele
                       ct (p428 datasheet de lm3s9B92.pdf)
   40 00000000         



ARM Macro Assembler    Page 2 


   41 00000000         ;; Digital enable register
   42 00000000         ;; To use the pin as a digital input or output, the corr
                       esponding GPIODEN bit must be set.
   43 00000000         ;GPIO_O_DEN     EQU  0x0000051C  ; GPIO Digital Enable (
                       p437 datasheet de lm3s9B92.pdf)
   44 00000000         
   45 00000000         ;; The GPIOPUR register is the pull-up control register
   46 00000000         ;GPIO_O_PUR   EQU  0x00000510 
   47 00000000         
   48 00000000         ;; PINS port input
   49 00000000         ;PINSD_6_7    EQU  0xC0  ; switch 1 & 2 sur broches 6 & 
                       7 (1100 0000)
   50 00000000         ;PINSE_1_2    EQU  0x03  ; bumpers 1 & 2 sur les broches
                        (0000 0011)
   51 00000000         
   52 00000000         ;; PINS port output
   53 00000000         ;PINSF_4_5    EQU  0x30  ; led 1 & 2 sur broches 4 & 5 (
                       0011 0000)
   54 00000000         
   55 00000000         ;; blinking frequency
   56 00000000         ;DUREE      EQU     0x002FFFFF ; Random Value
   57 00000000         
   58 00000000         
   59 00000000         ;__main 
   60 00000000         
   61 00000000         
   62 00000000         ;;; BL Branchement vers un lien (sous programme)
   63 00000000         
   64 00000000         ;; Configure les PWM + GPIO
   65 00000000         ;BL MOTEUR_INIT         
   66 00000000         
   67 00000000         ;; Activer les deux moteurs droit et gauche
   68 00000000         ;BL MOTEUR_DROIT_ON
   69 00000000         ;BL MOTEUR_GAUCHE_ON
   70 00000000         
   71 00000000         ;; Boucle de pilotage des 2 Moteurs (Evalbot tourne sur 
                       lui même)
   72 00000000         ;loop 
   73 00000000         ;; Evalbot avance droit devant
   74 00000000         ;BL MOTEUR_DROIT_AVANT    
   75 00000000         ;BL MOTEUR_GAUCHE_AVANT
   76 00000000         
   77 00000000         ;; Avancement pendant une période (deux WAIT)
   78 00000000         ;BL WAIT ; BL (Branchement vers le lien WAIT); possibili
                       té de retour à la suite avec (BX LR)
   79 00000000         ;BL WAIT
   80 00000000         
   81 00000000         ;; Rotation à droite de l'Evalbot pendant une demi-pér
                       iode (1 seul WAIT)
   82 00000000         ;;BL MOTEUR_DROIT_ARRIERE   ; MOTEUR_DROIT_INVERSE
   83 00000000         ;;BL WAIT
   84 00000000         
   85 00000000         ;b loop
   86 00000000         
   87 00000000         ;;; Boucle d'attante
   88 00000000         ;WAIT ldr r1, =0xAFFFFF 
   89 00000000         ;wait1 subs r1, #1
   90 00000000         ;bne wait1
   91 00000000         



ARM Macro Assembler    Page 3 


   92 00000000         ;;; retour à la suite du lien de branchement
   93 00000000         ;BX LR
   94 00000000         
   95 00000000         ;NOP
   96 00000000         ;END
                       
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=.\rk_mot
ors_prise_en_main.d -o.\rk_motors_prise_en_main.o -I"C:\Program Files\Keil\ARM\
RV31\INC" -I"C:\Program Files\Keil\ARM\CMSIS\Include" -I"C:\Program Files\Keil\
ARM\Inc\Luminary" --predefine="__EVAL SETA 1" --predefine="__MICROLIB SETA 1" -
-list=.\rk_motors_prise_en_main.lst rk_motors_prise_en_main.s
332 symbols in table
